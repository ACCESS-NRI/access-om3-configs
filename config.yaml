# Payu configuration

# If submitting to a different project to your default, uncomment line below 
# and change project code as appropriate; also set shortpath below
project: oz91
# Force payu to always find, and save, files in this scratch project directory
shortpath: /scratch/x77

# Using payu sync is recommend to copy data from ephemeral scratch space to 
# longer term storage
sync:
    enable: False # set path below and change to true
    path: null # Set to location on /g/data (e.g. /g/data/PROJECT/USER/EXPERIMENT)
    restart: True

queue: normalsr
ncpus: 1664
jobfs: 10GB
mem: 8000GB

walltime: 10:00:00
jobname: 8km_panAn_isnt

model: access-om3

#exe: access-om3-MOM6-CICE6
#exe: /g/data/tm70/cy8964/spack/0.22/release/linux-rocky8-x86_64_v4/oneapi-2025.2.0/access3-2025.08.000-w4fxitax5qhwxig7stb6zlxc4ij3nkex/bin/access-om3-MOM6-CICE6
exe: /g/data/tm70/cy8964/access-om3-MOM6-CICE6-b2e31ba

input:
    - /g/data/tm70/cy8964/mom6/input/input-8km/150925/kmt_Charrassin_sea_ice_from_iceelev_new150925.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/ocean_hgrid_cropped.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/ocean_vgrid_cropped.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/ACCESS-OM2_IC_bfilled_smoothedland.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/salt_restore_interpolated_nearest.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/150925/salt_restore_mask.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/150925/topog_Charrassin_sea_ice_from_iceelev_new150925.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/150925/topog_Charrassin_open_cavity_noGL5m_new150925.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/150925/access-om3-8km-ESMFmesh_Charrassin_nocavity_cropped.nc 
    - /g/data/tm70/cy8964/mom6/input/input-8km/150925/access-om3-8km-nomask-ESMFmesh_Charrassin_nocavity_cropped.nc 
    - /g/data/vk83/configurations/inputs/access-om3/share/meshes/share/2024.09.16/JRA55do-datm-ESMFmesh.nc
    - /g/data/vk83/configurations/inputs/access-om3/share/meshes/share/2024.09.16/JRA55do-drof-ESMFmesh.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/150925/access-om3-8km-rof-remap-weights_Charrassin_nocavity_cropped.nc
    - /g/data/vk83/experiments/inputs/JRA-55/RYF/v1-4/data
    - /g/data/tm70/cy8964/mom6/input/input-8km/forcing_access_yr2_8km_fill.nc
    - /g/data/tm70/cy8964/mom6/input/input-8km/diag_rho2.nc 
    - /g/data/tm70/cy8964/mom6/input/input-8km/150925/ice_thickness_Charrassin_regridded_cropped_add_area_where_iceelev_noGL5m_ADDHMASKFILLTHICK_150925.nc
 
collate:
  restart: true
  mpi: true
  walltime: 1:00:00
  mem: 190GB
  ncpus: 16
  queue: normal
  exe: mppnccombine-fast
runlog: true
metadata: 
    enable: false

userscripts:
    archive: /usr/bin/bash /g/data/vk83/apps/om3-scripts/payu_config/archive.sh
    error: resub.sh
    run: rm -f resubmit.count

postscript: -v PROJECT,SCRIPTS_DIR=/g/data/vk83/apps/om3-scripts -lstorage=${PBS_NCI_STORAGE}+gdata/xp65 /g/data/vk83/apps/om3-scripts/payu_config/postscript.sh

#Model software version
modules:
    use:
        - /g/data/vk83/prerelease/modules
    load:
        - model-tools/mppnccombine-fast/2025.07.000
        - nco/5.0.5

payu_minimum_version: 1.1.6

platform:
  nodesize: 104
  nodemem: 512
